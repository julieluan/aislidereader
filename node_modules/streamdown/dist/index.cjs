"use strict";"use client";var Vo=Object.create;var ue=Object.defineProperty;var Xo=Object.getOwnPropertyDescriptor;var Jo=Object.getOwnPropertyNames;var Ko=Object.getPrototypeOf,Zo=Object.prototype.hasOwnProperty;var Go=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Yo=(e,t)=>{for(var o in t)ue(e,o,{get:t[o],enumerable:!0})},ut=(e,t,o,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of Jo(t))!Zo.call(e,r)&&r!==o&&ue(e,r,{get:()=>t[r],enumerable:!(n=Xo(t,r))||n.enumerable});return e};var E=(e,t,o)=>(o=e!=null?Vo(Ko(e)):{},ut(t||!e||!e.__esModule?ue(o,"default",{value:e,enumerable:!0}):o,e)),Qo=e=>ut(ue({},"__esModule",{value:!0}),e);var ko=Go((fs,wo)=>{"use strict";var Pe=Object.prototype.hasOwnProperty,yo=Object.prototype.toString,po=Object.defineProperty,uo=Object.getOwnPropertyDescriptor,fo=function(t){return typeof Array.isArray=="function"?Array.isArray(t):yo.call(t)==="[object Array]"},ho=function(t){if(!t||yo.call(t)!=="[object Object]")return!1;var o=Pe.call(t,"constructor"),n=t.constructor&&t.constructor.prototype&&Pe.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!o&&!n)return!1;var r;for(r in t);return typeof r=="undefined"||Pe.call(t,r)},go=function(t,o){po&&o.name==="__proto__"?po(t,o.name,{enumerable:!0,configurable:!0,value:o.newValue,writable:!0}):t[o.name]=o.newValue},bo=function(t,o){if(o==="__proto__")if(Pe.call(t,o)){if(uo)return uo(t,o).value}else return;return t[o]};wo.exports=function e(){var t,o,n,r,s,a,i=arguments[0],l=1,c=arguments.length,d=!1;for(typeof i=="boolean"&&(d=i,i=arguments[1]||{},l=2),(i==null||typeof i!="object"&&typeof i!="function")&&(i={});l<c;++l)if(t=arguments[l],t!=null)for(o in t)n=bo(i,o),r=bo(t,o),i!==r&&(d&&r&&(ho(r)||(s=fo(r)))?(s?(s=!1,a=n&&fo(n)?n:[]):a=n&&ho(n)?n:{},go(i,{name:o,newValue:e(d,a,r)})):typeof r!="undefined"&&go(i,{name:o,newValue:r}));return i}});var er={};Yo(er,{Block:()=>mt,Streamdown:()=>Wo,StreamdownContext:()=>v,defaultRehypePlugins:()=>Fo,defaultRemarkPlugins:()=>Uo,parseIncompleteMarkdown:()=>Le,parseMarkdownIntoBlocks:()=>Be});module.exports=Qo(er);var P=require("react"),Do=require("rehype-harden"),Ae=E(require("rehype-katex"),1),Ho=E(require("rehype-raw"),1),Oo=E(require("remark-cjk-friendly"),1),zo=E(require("remark-cjk-friendly-gfm-strikethrough"),1),qo=E(require("remark-gfm"),1),_o=E(require("remark-math"),1);var y=require("react");var _=require("react");var fe=require("react");var ft=require("clsx"),ht=require("tailwind-merge"),f=(...e)=>(0,ht.twMerge)((0,ft.clsx)(e)),D=(e,t,o)=>{let n=typeof t=="string"?new Blob([t],{type:o}):t,r=URL.createObjectURL(n),s=document.createElement("a");s.href=r,s.download=e,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(r)};var le=require("react/jsx-runtime"),en=f("block","before:content-[counter(line)]","before:inline-block","before:[counter-increment:line]","before:w-4","before:mr-4","before:text-[13px]","before:text-right","before:text-muted-foreground/50","before:font-mono","before:select-none"),gt=(0,fe.memo)(({children:e,result:t,language:o,className:n,...r})=>{let s=(0,fe.useMemo)(()=>({backgroundColor:t.bg,color:t.fg}),[t.bg,t.fg]);return(0,le.jsx)("pre",{className:f(n,"p-4 text-sm"),"data-code-block":!0,"data-language":o,style:s,...r,children:(0,le.jsx)("code",{className:"[counter-increment:line_0] [counter-reset:line]",children:t.tokens.map((a,i)=>(0,le.jsx)("span",{className:en,children:a.map((l,c)=>(0,le.jsx)("span",{style:{color:l.color,backgroundColor:l.bgColor,...l.htmlStyle},...l.htmlAttrs,children:l.content},c))},i))})})},(e,t)=>e.result===t.result&&e.language===t.language&&e.className===t.className);var yt=require("react/jsx-runtime"),bt=({className:e,language:t,style:o,...n})=>(0,yt.jsx)("div",{className:f("my-4 w-full overflow-hidden rounded-xl border border-border",e),"data-code-block-container":!0,"data-language":t,style:{contentVisibility:"auto",containIntrinsicSize:"auto 200px",...o},...n});var he=require("react"),je=(0,he.createContext)({code:""}),ge=()=>(0,he.useContext)(je);var ce=require("react/jsx-runtime"),wt=({language:e,children:t})=>(0,ce.jsxs)("div",{className:"flex items-center justify-between bg-muted/80 p-3 text-muted-foreground text-xs","data-code-block-header":!0,"data-language":e,children:[(0,ce.jsx)("span",{className:"ml-1 font-mono lowercase",children:e}),(0,ce.jsx)("div",{className:"flex items-center gap-2",children:t})]});var kt=require("shiki"),Ct=require("shiki/engine/javascript"),tn=(0,Ct.createJavaScriptRegexEngine)({forgiving:!0}),$e=new Map,De=new Map,ne=new Map,on=(e,t)=>`${e}-${t[0]}-${t[1]}`,nn=(e,t,o)=>{let n=e.slice(0,100),r=e.length>100?e.slice(-100):"";return`${t}:${o[0]}:${o[1]}:${e.length}:${n}:${r}`},rn=(e,t)=>{let o=on(e,t);if($e.has(o))return $e.get(o);let n=(0,kt.createHighlighter)({themes:t,langs:[e],engine:tn});return $e.set(o,n),n},He=(e,t,o,n)=>{let r=nn(e,t,o);return De.has(r)?De.get(r):(n&&(ne.has(r)||ne.set(r,new Set),ne.get(r).add(n)),rn(t,o).then(s=>{let a=s.codeToTokens(e,{lang:t,themes:{light:o[0],dark:o[1]}});De.set(r,a);let i=ne.get(r);if(i){for(let l of i)l(a);ne.delete(r)}}).catch(s=>{console.error("Failed to highlight code:",s),ne.delete(r)}),null)};var re=require("react/jsx-runtime"),vt=({code:e,language:t,className:o,children:n,preClassName:r,...s})=>{let{shikiTheme:a}=(0,_.useContext)(v),i=(0,_.useMemo)(()=>({bg:"transparent",fg:"inherit",tokens:e.split(`
`).map(d=>[{content:d,color:"inherit",bgColor:"transparent",htmlStyle:{},offset:0}])}),[e]),[l,c]=(0,_.useState)(i);return(0,_.useEffect)(()=>{let d=He(e,t,a);if(d){c(d);return}He(e,t,a,m=>{c(m)})},[e,t,a]),(0,re.jsx)(je.Provider,{value:{code:e},children:(0,re.jsxs)(bt,{language:t,children:[(0,re.jsx)(wt,{language:t,children:n}),(0,re.jsx)(gt,{className:o,language:t,result:l,...s})]})})};var be=require("lucide-react"),F=require("react");var Oe=require("react/jsx-runtime"),ze=({onCopy:e,onError:t,timeout:o=2e3,children:n,className:r,code:s,...a})=>{let[i,l]=(0,F.useState)(!1),c=(0,F.useRef)(0),{code:d}=ge(),{isAnimating:m}=(0,F.useContext)(v),p=s!=null?s:d,h=async()=>{var b;if(typeof window=="undefined"||!((b=navigator==null?void 0:navigator.clipboard)!=null&&b.writeText)){t==null||t(new Error("Clipboard API not available"));return}try{i||(await navigator.clipboard.writeText(p),l(!0),e==null||e(),c.current=window.setTimeout(()=>l(!1),o))}catch(w){t==null||t(w)}};(0,F.useEffect)(()=>()=>{window.clearTimeout(c.current)},[]);let u=i?be.CheckIcon:be.CopyIcon;return(0,Oe.jsx)("button",{className:f("cursor-pointer p-1 text-muted-foreground transition-all hover:text-foreground disabled:cursor-not-allowed disabled:opacity-50",r),disabled:m,onClick:h,type:"button",...a,children:n!=null?n:(0,Oe.jsx)(u,{size:14})})};var Tt=require("lucide-react"),Pt=require("react");var qe=require("react/jsx-runtime"),Mt={"1c":"1c","1c-query":"1cq",abap:"abap","actionscript-3":"as",ada:"ada",adoc:"adoc","angular-html":"html","angular-ts":"ts",apache:"conf",apex:"cls",apl:"apl",applescript:"applescript",ara:"ara",asciidoc:"adoc",asm:"asm",astro:"astro",awk:"awk",ballerina:"bal",bash:"sh",bat:"bat",batch:"bat",be:"be",beancount:"beancount",berry:"berry",bibtex:"bib",bicep:"bicep",blade:"blade.php",bsl:"bsl",c:"c","c#":"cs","c++":"cpp",cadence:"cdc",cairo:"cairo",cdc:"cdc",clarity:"clar",clj:"clj",clojure:"clj","closure-templates":"soy",cmake:"cmake",cmd:"cmd",cobol:"cob",codeowners:"CODEOWNERS",codeql:"ql",coffee:"coffee",coffeescript:"coffee","common-lisp":"lisp",console:"sh",coq:"v",cpp:"cpp",cql:"cql",crystal:"cr",cs:"cs",csharp:"cs",css:"css",csv:"csv",cue:"cue",cypher:"cql",d:"d",dart:"dart",dax:"dax",desktop:"desktop",diff:"diff",docker:"dockerfile",dockerfile:"dockerfile",dotenv:"env","dream-maker":"dm",edge:"edge",elisp:"el",elixir:"ex",elm:"elm","emacs-lisp":"el",erb:"erb",erl:"erl",erlang:"erl",f:"f","f#":"fs",f03:"f03",f08:"f08",f18:"f18",f77:"f77",f90:"f90",f95:"f95",fennel:"fnl",fish:"fish",fluent:"ftl",for:"for","fortran-fixed-form":"f","fortran-free-form":"f90",fs:"fs",fsharp:"fs",fsl:"fsl",ftl:"ftl",gdresource:"tres",gdscript:"gd",gdshader:"gdshader",genie:"gs",gherkin:"feature","git-commit":"gitcommit","git-rebase":"gitrebase",gjs:"js",gleam:"gleam","glimmer-js":"js","glimmer-ts":"ts",glsl:"glsl",gnuplot:"plt",go:"go",gql:"gql",graphql:"graphql",groovy:"groovy",gts:"gts",hack:"hack",haml:"haml",handlebars:"hbs",haskell:"hs",haxe:"hx",hbs:"hbs",hcl:"hcl",hjson:"hjson",hlsl:"hlsl",hs:"hs",html:"html","html-derivative":"html",http:"http",hxml:"hxml",hy:"hy",imba:"imba",ini:"ini",jade:"jade",java:"java",javascript:"js",jinja:"jinja",jison:"jison",jl:"jl",js:"js",json:"json",json5:"json5",jsonc:"jsonc",jsonl:"jsonl",jsonnet:"jsonnet",jssm:"jssm",jsx:"jsx",julia:"jl",kotlin:"kt",kql:"kql",kt:"kt",kts:"kts",kusto:"kql",latex:"tex",lean:"lean",lean4:"lean",less:"less",liquid:"liquid",lisp:"lisp",lit:"lit",llvm:"ll",log:"log",logo:"logo",lua:"lua",luau:"luau",make:"mak",makefile:"mak",markdown:"md",marko:"marko",matlab:"m",md:"md",mdc:"mdc",mdx:"mdx",mediawiki:"wiki",mermaid:"mmd",mips:"s",mipsasm:"s",mmd:"mmd",mojo:"mojo",move:"move",nar:"nar",narrat:"narrat",nextflow:"nf",nf:"nf",nginx:"conf",nim:"nim",nix:"nix",nu:"nu",nushell:"nu",objc:"m","objective-c":"m","objective-cpp":"mm",ocaml:"ml",pascal:"pas",perl:"pl",perl6:"p6",php:"php",plsql:"pls",po:"po",polar:"polar",postcss:"pcss",pot:"pot",potx:"potx",powerquery:"pq",powershell:"ps1",prisma:"prisma",prolog:"pl",properties:"properties",proto:"proto",protobuf:"proto",ps:"ps",ps1:"ps1",pug:"pug",puppet:"pp",purescript:"purs",py:"py",python:"py",ql:"ql",qml:"qml",qmldir:"qmldir",qss:"qss",r:"r",racket:"rkt",raku:"raku",razor:"cshtml",rb:"rb",reg:"reg",regex:"regex",regexp:"regexp",rel:"rel",riscv:"s",rs:"rs",rst:"rst",ruby:"rb",rust:"rs",sas:"sas",sass:"sass",scala:"scala",scheme:"scm",scss:"scss",sdbl:"sdbl",sh:"sh",shader:"shader",shaderlab:"shader",shell:"sh",shellscript:"sh",shellsession:"sh",smalltalk:"st",solidity:"sol",soy:"soy",sparql:"rq",spl:"spl",splunk:"spl",sql:"sql","ssh-config":"config",stata:"do",styl:"styl",stylus:"styl",svelte:"svelte",swift:"swift","system-verilog":"sv",systemd:"service",talon:"talon",talonscript:"talon",tasl:"tasl",tcl:"tcl",templ:"templ",terraform:"tf",tex:"tex",tf:"tf",tfvars:"tfvars",toml:"toml",ts:"ts","ts-tags":"ts",tsp:"tsp",tsv:"tsv",tsx:"tsx",turtle:"ttl",twig:"twig",typ:"typ",typescript:"ts",typespec:"tsp",typst:"typ",v:"v",vala:"vala",vb:"vb",verilog:"v",vhdl:"vhdl",vim:"vim",viml:"vim",vimscript:"vim",vue:"vue","vue-html":"html","vue-vine":"vine",vy:"vy",vyper:"vy",wasm:"wasm",wenyan:"wy",wgsl:"wgsl",wiki:"wiki",wikitext:"wiki",wit:"wit",wl:"wl",wolfram:"wl",xml:"xml",xsl:"xsl",yaml:"yaml",yml:"yml",zenscript:"zs",zig:"zig",zsh:"zsh",\u6587\u8A00:"wy"},xt=({onDownload:e,onError:t,language:o,children:n,className:r,code:s,...a})=>{let{code:i}=ge(),{isAnimating:l}=(0,Pt.useContext)(v),c=s!=null?s:i,m=`file.${o&&o in Mt?Mt[o]:"txt"}`,p="text/plain",h=()=>{try{D(m,c,p),e==null||e()}catch(u){t==null||t(u)}};return(0,qe.jsx)("button",{className:f("cursor-pointer p-1 text-muted-foreground transition-all hover:text-foreground disabled:cursor-not-allowed disabled:opacity-50",r),disabled:l,onClick:h,title:"Download file",type:"button",...a,children:n!=null?n:(0,qe.jsx)(Tt.DownloadIcon,{size:14})})};var Nt=require("lucide-react");var Y=require("react/jsx-runtime"),sn=/\.[^/.]+$/,It=({node:e,className:t,src:o,alt:n,...r})=>{let s=async()=>{if(o)try{let i=await(await fetch(o)).blob(),c=new URL(o,window.location.origin).pathname.split("/").pop()||"",d=c.split(".").pop(),m=c.includes(".")&&d!==void 0&&d.length<=4,p="";if(m)p=c;else{let h=i.type,u="png";h.includes("jpeg")||h.includes("jpg")?u="jpg":h.includes("png")?u="png":h.includes("svg")?u="svg":h.includes("gif")?u="gif":h.includes("webp")&&(u="webp"),p=`${(n||c||"image").replace(sn,"")}.${u}`}D(p,i,i.type)}catch(a){console.error("Failed to download image:",a)}};return o?(0,Y.jsxs)("div",{className:"group relative my-4 inline-block","data-streamdown":"image-wrapper",children:[(0,Y.jsx)("img",{alt:n,className:f("max-w-full rounded-lg",t),"data-streamdown":"image",src:o,...r}),(0,Y.jsx)("div",{className:"pointer-events-none absolute inset-0 hidden rounded-lg bg-black/10 group-hover:block"}),(0,Y.jsx)("button",{className:f("absolute right-2 bottom-2 flex h-8 w-8 cursor-pointer items-center justify-center rounded-md border border-border bg-background/90 shadow-sm backdrop-blur-sm transition-all duration-200 hover:bg-background","opacity-0 group-hover:opacity-100"),onClick:s,title:"Download image",type:"button",children:(0,Y.jsx)(Nt.DownloadIcon,{size:14})})]}):null};var H=require("react");var se=require("lucide-react"),T=require("react");var j=require("react/jsx-runtime"),St=({children:e,className:t,minZoom:o=.5,maxZoom:n=3,zoomStep:r=.1,showControls:s=!0,initialZoom:a=1,fullscreen:i=!1})=>{let l=(0,T.useRef)(null),c=(0,T.useRef)(null),[d,m]=(0,T.useState)(a),[p,h]=(0,T.useState)({x:0,y:0}),[u,b]=(0,T.useState)(!1),[w,C]=(0,T.useState)({x:0,y:0}),[N,B]=(0,T.useState)({x:0,y:0}),I=(0,T.useCallback)(k=>{m(R=>Math.max(o,Math.min(n,R+k)))},[o,n]),q=(0,T.useCallback)(()=>{I(r)},[I,r]),G=(0,T.useCallback)(()=>{I(-r)},[I,r]),te=(0,T.useCallback)(()=>{m(a),h({x:0,y:0})},[a]),$=(0,T.useCallback)(k=>{k.preventDefault();let R=k.deltaY>0?-r:r;I(R)},[I,r]),oe=(0,T.useCallback)(k=>{if(k.button!==0||k.isPrimary===!1)return;b(!0),C({x:k.clientX,y:k.clientY}),B(p);let R=k.currentTarget;R instanceof HTMLElement&&R.setPointerCapture(k.pointerId)},[p]),Re=(0,T.useCallback)(k=>{if(!u)return;k.preventDefault();let R=k.clientX-w.x,pt=k.clientY-w.y;h({x:N.x+R,y:N.y+pt})},[u,w,N]),ae=(0,T.useCallback)(k=>{b(!1);let R=k.currentTarget;R instanceof HTMLElement&&R.releasePointerCapture(k.pointerId)},[]);return(0,T.useEffect)(()=>{let k=l.current;if(k)return k.addEventListener("wheel",$,{passive:!1}),()=>{k.removeEventListener("wheel",$)}},[$]),(0,T.useEffect)(()=>{let k=c.current;if(k&&u)return document.body.style.userSelect="none",k.addEventListener("pointermove",Re,{passive:!1}),k.addEventListener("pointerup",ae),k.addEventListener("pointercancel",ae),()=>{document.body.style.userSelect="",k.removeEventListener("pointermove",Re),k.removeEventListener("pointerup",ae),k.removeEventListener("pointercancel",ae)}},[u,Re,ae]),(0,j.jsxs)("div",{className:f("relative",i?"h-full w-full":"w-full",t),ref:l,style:{cursor:u?"grabbing":"grab"},children:[s&&(0,j.jsxs)("div",{className:f("absolute z-10 flex flex-col gap-1 rounded-md border border-border bg-background/90 p-1 shadow-sm backdrop-blur-sm",i?"bottom-4 left-4":"bottom-2 left-2"),children:[(0,j.jsx)("button",{className:"flex items-center justify-center rounded p-1.5 text-muted-foreground transition-colors hover:bg-muted hover:text-foreground disabled:cursor-not-allowed disabled:opacity-50",disabled:d>=n,onClick:q,title:"Zoom in",type:"button",children:(0,j.jsx)(se.ZoomInIcon,{size:16})}),(0,j.jsx)("button",{className:"flex items-center justify-center rounded p-1.5 text-muted-foreground transition-colors hover:bg-muted hover:text-foreground disabled:cursor-not-allowed disabled:opacity-50",disabled:d<=o,onClick:G,title:"Zoom out",type:"button",children:(0,j.jsx)(se.ZoomOutIcon,{size:16})}),(0,j.jsx)("button",{className:"flex items-center justify-center rounded p-1.5 text-muted-foreground transition-colors hover:bg-muted hover:text-foreground",onClick:te,title:"Reset zoom and pan",type:"button",children:(0,j.jsx)(se.RotateCcwIcon,{size:16})})]}),(0,j.jsx)("div",{className:f("origin-center transition-transform duration-150 ease-out",i&&"flex h-full w-full items-center justify-center"),onPointerDown:oe,ref:c,role:"application",style:{transform:`translate(${p.x}px, ${p.y}px) scale(${d})`,transformOrigin:"center center",touchAction:"none",willChange:"transform"},children:e})]})};var ye=async e=>{let o={...{startOnLoad:!1,theme:"default",securityLevel:"strict",fontFamily:"monospace",suppressErrorRendering:!0},...e},r=(await import("mermaid")).default;return r.initialize(o),r},Bt=(e,t)=>{var n;let o=(n=t==null?void 0:t.scale)!=null?n:5;return new Promise((r,s)=>{let a="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(e))),i=new Image;i.crossOrigin="anonymous",i.onload=()=>{let l=document.createElement("canvas"),c=i.width*o,d=i.height*o;l.width=c,l.height=d;let m=l.getContext("2d");if(!m){s(new Error("Failed to create 2D canvas context for PNG export"));return}m.drawImage(i,0,0,c,d),l.toBlob(p=>{if(!p){s(new Error("Failed to create PNG blob"));return}r(p)},"image/png")},i.onerror=()=>s(new Error("Failed to load SVG image")),i.src=a})};var S=require("react/jsx-runtime"),we=({chart:e,className:t,config:o,fullscreen:n=!1})=>{let[r,s]=(0,H.useState)(null),[a,i]=(0,H.useState)(!0),[l,c]=(0,H.useState)(""),[d,m]=(0,H.useState)(""),[p,h]=(0,H.useState)(0),{mermaid:u}=(0,H.useContext)(v),b=u==null?void 0:u.errorComponent;if((0,H.useEffect)(()=>{(async()=>{try{s(null),i(!0);let N=await ye(o),B=e.split("").reduce((G,te)=>(G<<5)-G+te.charCodeAt(0)|0,0),I=`mermaid-${Math.abs(B)}-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,{svg:q}=await N.render(I,e);c(q),m(q)}catch(N){if(!(d||l)){let B=N instanceof Error?N.message:"Failed to render Mermaid chart";s(B)}}finally{i(!1)}})()},[e,o,p]),a&&!l&&!d)return(0,S.jsx)("div",{className:f("my-4 flex justify-center p-4",t),children:(0,S.jsxs)("div",{className:"flex items-center space-x-2 text-muted-foreground",children:[(0,S.jsx)("div",{className:"h-4 w-4 animate-spin rounded-full border-current border-b-2"}),(0,S.jsx)("span",{className:"text-sm",children:"Loading diagram..."})]})});if(r&&!l&&!d){let C=()=>h(N=>N+1);return b?(0,S.jsx)(b,{chart:e,error:r,retry:C}):(0,S.jsxs)("div",{className:f("rounded-lg border border-red-200 bg-red-50 p-4",t),children:[(0,S.jsxs)("p",{className:"font-mono text-red-700 text-sm",children:["Mermaid Error: ",r]}),(0,S.jsxs)("details",{className:"mt-2",children:[(0,S.jsx)("summary",{className:"cursor-pointer text-red-600 text-xs",children:"Show Code"}),(0,S.jsx)("pre",{className:"mt-2 overflow-x-auto rounded bg-red-100 p-2 text-red-800 text-xs",children:e})]})]})}let w=l||d;return(0,S.jsx)(St,{className:f(n?"h-full w-full overflow-hidden":"my-4 overflow-hidden",t),fullscreen:n,maxZoom:3,minZoom:.5,showControls:!0,zoomStep:.1,children:(0,S.jsx)("div",{"aria-label":"Mermaid chart",className:f("flex justify-center",n&&"h-full w-full items-center"),dangerouslySetInnerHTML:{__html:w},role:"img"})})};var Et=require("lucide-react"),U=require("react");var z=require("react/jsx-runtime"),Lt=({chart:e,children:t,className:o,onDownload:n,config:r,onError:s})=>{let[a,i]=(0,U.useState)(!1),l=(0,U.useRef)(null),{isAnimating:c}=(0,U.useContext)(v),d=async m=>{try{if(m==="mmd"){D("diagram.mmd",e,"text/plain"),i(!1),n==null||n(m);return}let p=await ye(r),h=e.split("").reduce((w,C)=>(w<<5)-w+C.charCodeAt(0)|0,0),u=`mermaid-${Math.abs(h)}-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,{svg:b}=await p.render(u,e);if(!b){s==null||s(new Error("SVG not found. Please wait for the diagram to render."));return}if(m==="svg"){D("diagram.svg",b,"image/svg+xml"),i(!1),n==null||n(m);return}if(m==="png"){let w=await Bt(b);D("diagram.png",w,"image/png"),n==null||n(m),i(!1);return}}catch(p){s==null||s(p)}};return(0,U.useEffect)(()=>{let m=p=>{l.current&&!l.current.contains(p.target)&&i(!1)};return document.addEventListener("mousedown",m),()=>{document.removeEventListener("mousedown",m)}},[]),(0,z.jsxs)("div",{className:"relative",ref:l,children:[(0,z.jsx)("button",{className:f("cursor-pointer p-1 text-muted-foreground transition-all hover:text-foreground disabled:cursor-not-allowed disabled:opacity-50",o),disabled:c,onClick:()=>i(!a),title:"Download diagram",type:"button",children:t!=null?t:(0,z.jsx)(Et.DownloadIcon,{size:14})}),a&&(0,z.jsxs)("div",{className:"absolute top-full right-0 z-10 mt-1 min-w-[120px] overflow-hidden rounded-md border border-border bg-background shadow-lg",children:[(0,z.jsx)("button",{className:"w-full px-3 py-2 text-left text-sm transition-colors hover:bg-muted/40",onClick:()=>d("svg"),type:"button",children:"SVG"}),(0,z.jsx)("button",{className:"w-full px-3 py-2 text-left text-sm transition-colors hover:bg-muted/40",onClick:()=>d("png"),type:"button",children:"PNG"}),(0,z.jsx)("button",{className:"w-full px-3 py-2 text-left text-sm transition-colors hover:bg-muted/40",onClick:()=>d("mmd"),type:"button",children:"MMD"})]})]})};var ke=require("lucide-react"),Q=require("react");var L=require("react/jsx-runtime"),de=0,an=()=>{de+=1,de===1&&(document.body.style.overflow="hidden")},ln=()=>{de=Math.max(0,de-1),de===0&&(document.body.style.overflow="")},At=({chart:e,config:t,onFullscreen:o,onExit:n,className:r,...s})=>{let[a,i]=(0,Q.useState)(!1),{isAnimating:l}=(0,Q.useContext)(v),c=()=>{i(!a)};return(0,Q.useEffect)(()=>{if(a){an();let d=m=>{m.key==="Escape"&&i(!1)};return document.addEventListener("keydown",d),()=>{document.removeEventListener("keydown",d),ln()}}},[a]),(0,Q.useEffect)(()=>{a?o==null||o():n&&n()},[a,o,n]),(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)("button",{className:f("cursor-pointer p-1 text-muted-foreground transition-all hover:text-foreground disabled:cursor-not-allowed disabled:opacity-50",r),disabled:l,onClick:c,title:"View fullscreen",type:"button",...s,children:(0,L.jsx)(ke.Maximize2Icon,{size:14})}),a&&(0,L.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-background/95 backdrop-blur-sm",onClick:c,onKeyDown:d=>{d.key==="Escape"&&c()},role:"button",tabIndex:0,children:[(0,L.jsx)("button",{className:"absolute top-4 right-4 z-10 rounded-md p-2 text-muted-foreground transition-all hover:bg-muted hover:text-foreground",onClick:c,title:"Exit fullscreen",type:"button",children:(0,L.jsx)(ke.XIcon,{size:20})}),(0,L.jsx)("div",{className:"flex h-full w-full items-center justify-center p-4",onClick:d=>d.stopPropagation(),onKeyDown:d=>d.stopPropagation(),role:"presentation",children:(0,L.jsx)(we,{chart:e,className:"h-full w-full [&>div]:h-full [&>div]:overflow-hidden [&_svg]:h-auto [&_svg]:w-auto",config:t,fullscreen:!0})})]})]})};var Me=require("lucide-react"),O=require("react");var Ce=e=>{var s,a;let t=[],o=[],n=e.querySelectorAll("thead th");for(let i of n)t.push(((s=i.textContent)==null?void 0:s.trim())||"");let r=e.querySelectorAll("tbody tr");for(let i of r){let l=[],c=i.querySelectorAll("td");for(let d of c)l.push(((a=d.textContent)==null?void 0:a.trim())||"");o.push(l)}return{headers:t,rows:o}},ve=e=>{let{headers:t,rows:o}=e,n=i=>{let l=!1,c=!1;for(let d=0;d<i.length;d+=1){let m=i[d];if(m==='"'){l=!0,c=!0;break}(m===","||m===`
`)&&(l=!0)}return l?c?`"${i.replace(/"/g,'""')}"`:`"${i}"`:i},r=t.length>0?o.length+1:o.length,s=new Array(r),a=0;t.length>0&&(s[a]=t.map(n).join(","),a+=1);for(let i of o)s[a]=i.map(n).join(","),a+=1;return s.join(`
`)},Rt=e=>{let{headers:t,rows:o}=e,n=i=>{let l=!1;for(let d=0;d<i.length;d+=1){let m=i[d];if(m==="	"||m===`
`||m==="\r"){l=!0;break}}if(!l)return i;let c=[];for(let d=0;d<i.length;d+=1){let m=i[d];m==="	"?c.push("\\t"):m===`
`?c.push("\\n"):m==="\r"?c.push("\\r"):c.push(m)}return c.join("")},r=t.length>0?o.length+1:o.length,s=new Array(r),a=0;t.length>0&&(s[a]=t.map(n).join("	"),a+=1);for(let i of o)s[a]=i.map(n).join("	"),a+=1;return s.join(`
`)},_e=e=>{let t=!1;for(let n=0;n<e.length;n+=1){let r=e[n];if(r==="\\"||r==="|"){t=!0;break}}if(!t)return e;let o=[];for(let n=0;n<e.length;n+=1){let r=e[n];r==="\\"?o.push("\\\\"):r==="|"?o.push("\\|"):o.push(r)}return o.join("")},jt=e=>{let{headers:t,rows:o}=e;if(t.length===0)return"";let n=new Array(o.length+2),r=0,s=t.map(i=>_e(i));n[r]=`| ${s.join(" | ")} |`,r+=1;let a=new Array(t.length);for(let i=0;i<t.length;i+=1)a[i]="---";n[r]=`| ${a.join(" | ")} |`,r+=1;for(let i of o)if(i.length<t.length){let l=new Array(t.length);for(let c=0;c<t.length;c+=1)l[c]=c<i.length?_e(i[c]):"";n[r]=`| ${l.join(" | ")} |`,r+=1}else{let l=i.map(c=>_e(c));n[r]=`| ${l.join(" | ")} |`,r+=1}return n.join(`
`)};var W=require("react/jsx-runtime"),$t=({children:e,className:t,onCopy:o,onError:n,timeout:r=2e3})=>{let[s,a]=(0,O.useState)(!1),[i,l]=(0,O.useState)(!1),c=(0,O.useRef)(null),d=(0,O.useRef)(0),{isAnimating:m}=(0,O.useContext)(v),p=async u=>{var b,w;if(typeof window=="undefined"||!((b=navigator==null?void 0:navigator.clipboard)!=null&&b.write)){n==null||n(new Error("Clipboard API not available"));return}try{let C=(w=c.current)==null?void 0:w.closest('[data-streamdown="table-wrapper"]'),N=C==null?void 0:C.querySelector("table");if(!N){n==null||n(new Error("Table not found"));return}let B=Ce(N),I=u==="csv"?ve(B):Rt(B),q=new ClipboardItem({"text/plain":new Blob([I],{type:"text/plain"}),"text/html":new Blob([N.outerHTML],{type:"text/html"})});await navigator.clipboard.write([q]),l(!0),a(!1),o==null||o(u),d.current=window.setTimeout(()=>l(!1),r)}catch(C){n==null||n(C)}};(0,O.useEffect)(()=>{let u=b=>{c.current&&!c.current.contains(b.target)&&a(!1)};return document.addEventListener("mousedown",u),()=>{document.removeEventListener("mousedown",u),window.clearTimeout(d.current)}},[]);let h=i?Me.CheckIcon:Me.CopyIcon;return(0,W.jsxs)("div",{className:"relative",ref:c,children:[(0,W.jsx)("button",{className:f("cursor-pointer p-1 text-muted-foreground transition-all hover:text-foreground disabled:cursor-not-allowed disabled:opacity-50",t),disabled:m,onClick:()=>a(!s),title:"Copy table",type:"button",children:e!=null?e:(0,W.jsx)(h,{size:14})}),s&&(0,W.jsxs)("div",{className:"absolute top-full right-0 z-10 mt-1 min-w-[120px] overflow-hidden rounded-md border border-border bg-background shadow-lg",children:[(0,W.jsx)("button",{className:"w-full px-3 py-2 text-left text-sm transition-colors hover:bg-muted/40",onClick:()=>p("csv"),type:"button",children:"CSV"}),(0,W.jsx)("button",{className:"w-full px-3 py-2 text-left text-sm transition-colors hover:bg-muted/40",onClick:()=>p("tsv"),type:"button",children:"TSV"})]})]})};var Dt=require("lucide-react"),X=require("react");var V=require("react/jsx-runtime");var Ht=({children:e,className:t,onDownload:o,onError:n})=>{let[r,s]=(0,X.useState)(!1),a=(0,X.useRef)(null),{isAnimating:i}=(0,X.useContext)(v),l=c=>{var d;try{let m=(d=a.current)==null?void 0:d.closest('[data-streamdown="table-wrapper"]'),p=m==null?void 0:m.querySelector("table");if(!p){n==null||n(new Error("Table not found"));return}let h=Ce(p),u=c==="csv"?ve(h):jt(h);D(`table.${c==="csv"?"csv":"md"}`,u,c==="csv"?"text/csv":"text/markdown"),s(!1),o==null||o(c)}catch(m){n==null||n(m)}};return(0,X.useEffect)(()=>{let c=d=>{a.current&&!a.current.contains(d.target)&&s(!1)};return document.addEventListener("mousedown",c),()=>{document.removeEventListener("mousedown",c)}},[]),(0,V.jsxs)("div",{className:"relative",ref:a,children:[(0,V.jsx)("button",{className:f("cursor-pointer p-1 text-muted-foreground transition-all hover:text-foreground disabled:cursor-not-allowed disabled:opacity-50",t),disabled:i,onClick:()=>s(!r),title:"Download table",type:"button",children:e!=null?e:(0,V.jsx)(Dt.DownloadIcon,{size:14})}),r&&(0,V.jsxs)("div",{className:"absolute top-full right-0 z-10 mt-1 min-w-[120px] overflow-hidden rounded-md border border-border bg-background shadow-lg",children:[(0,V.jsx)("button",{className:"w-full px-3 py-2 text-left text-sm transition-colors hover:bg-muted/40",onClick:()=>l("csv"),type:"button",children:"CSV"}),(0,V.jsx)("button",{className:"w-full px-3 py-2 text-left text-sm transition-colors hover:bg-muted/40",onClick:()=>l("markdown"),type:"button",children:"Markdown"})]})]})};var J=require("react/jsx-runtime"),Ot=({children:e,className:t,showControls:o,...n})=>(0,J.jsxs)("div",{className:"my-4 flex flex-col space-y-2","data-streamdown":"table-wrapper",children:[o&&(0,J.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[(0,J.jsx)($t,{}),(0,J.jsx)(Ht,{})]}),(0,J.jsx)("div",{className:"overflow-x-auto",children:(0,J.jsx)("table",{className:f("w-full border-collapse border border-border",t),"data-streamdown":"table",...n,children:e})})]});var g=require("react/jsx-runtime"),cn=/language-([^\s]+)/;function Te(e,t){if(!(e!=null&&e.position||t!=null&&t.position))return!0;if(!(e!=null&&e.position&&(t!=null&&t.position)))return!1;let o=e.position.start,n=t.position.start,r=e.position.end,s=t.position.end;return(o==null?void 0:o.line)===(n==null?void 0:n.line)&&(o==null?void 0:o.column)===(n==null?void 0:n.column)&&(r==null?void 0:r.line)===(s==null?void 0:s.line)&&(r==null?void 0:r.column)===(s==null?void 0:s.column)}function M(e,t){return e.className===t.className&&Te(e.node,t.node)}var Ue=(e,t)=>typeof e=="boolean"?e:e[t]!==!1,Fe=(e,t)=>{if(typeof e=="boolean")return e;let o=e.mermaid;return o===!1?!1:o===!0||o===void 0?!0:o[t]!==!1},We=(0,y.memo)(({children:e,className:t,node:o,...n})=>(0,g.jsx)("ol",{className:f("list-inside list-decimal whitespace-normal",t),"data-streamdown":"ordered-list",...n,children:e}),(e,t)=>M(e,t));We.displayName="MarkdownOl";var zt=(0,y.memo)(({children:e,className:t,node:o,...n})=>(0,g.jsx)("li",{className:f("py-1",t),"data-streamdown":"list-item",...n,children:e}),(e,t)=>e.className===t.className&&Te(e.node,t.node));zt.displayName="MarkdownLi";var qt=(0,y.memo)(({children:e,className:t,node:o,...n})=>(0,g.jsx)("ul",{className:f("list-inside list-disc whitespace-normal",t),"data-streamdown":"unordered-list",...n,children:e}),(e,t)=>M(e,t));qt.displayName="MarkdownUl";var _t=(0,y.memo)(({className:e,node:t,...o})=>(0,g.jsx)("hr",{className:f("my-6 border-border",e),"data-streamdown":"horizontal-rule",...o}),(e,t)=>M(e,t));_t.displayName="MarkdownHr";var Ft=(0,y.memo)(({children:e,className:t,node:o,...n})=>(0,g.jsx)("span",{className:f("font-semibold",t),"data-streamdown":"strong",...n,children:e}),(e,t)=>M(e,t));Ft.displayName="MarkdownStrong";var Ut=(0,y.memo)(({children:e,className:t,href:o,node:n,...r})=>{let s=o==="streamdown:incomplete-link";return(0,g.jsx)("a",{className:f("wrap-anywhere font-medium text-primary underline",t),"data-incomplete":s,"data-streamdown":"link",href:o,rel:"noreferrer",target:"_blank",...r,children:e})},(e,t)=>M(e,t)&&e.href===t.href);Ut.displayName="MarkdownA";var Wt=(0,y.memo)(({children:e,className:t,node:o,...n})=>(0,g.jsx)("h1",{className:f("mt-6 mb-2 font-semibold text-3xl",t),"data-streamdown":"heading-1",...n,children:e}),(e,t)=>M(e,t));Wt.displayName="MarkdownH1";var Vt=(0,y.memo)(({children:e,className:t,node:o,...n})=>(0,g.jsx)("h2",{className:f("mt-6 mb-2 font-semibold text-2xl",t),"data-streamdown":"heading-2",...n,children:e}),(e,t)=>M(e,t));Vt.displayName="MarkdownH2";var Xt=(0,y.memo)(({children:e,className:t,node:o,...n})=>(0,g.jsx)("h3",{className:f("mt-6 mb-2 font-semibold text-xl",t),"data-streamdown":"heading-3",...n,children:e}),(e,t)=>M(e,t));Xt.displayName="MarkdownH3";var Jt=(0,y.memo)(({children:e,className:t,node:o,...n})=>(0,g.jsx)("h4",{className:f("mt-6 mb-2 font-semibold text-lg",t),"data-streamdown":"heading-4",...n,children:e}),(e,t)=>M(e,t));Jt.displayName="MarkdownH4";var Kt=(0,y.memo)(({children:e,className:t,node:o,...n})=>(0,g.jsx)("h5",{className:f("mt-6 mb-2 font-semibold text-base",t),"data-streamdown":"heading-5",...n,children:e}),(e,t)=>M(e,t));Kt.displayName="MarkdownH5";var Zt=(0,y.memo)(({children:e,className:t,node:o,...n})=>(0,g.jsx)("h6",{className:f("mt-6 mb-2 font-semibold text-sm",t),"data-streamdown":"heading-6",...n,children:e}),(e,t)=>M(e,t));Zt.displayName="MarkdownH6";var Gt=(0,y.memo)(({children:e,className:t,node:o,...n})=>{let{controls:r}=(0,y.useContext)(v),s=Ue(r,"table");return(0,g.jsx)(Ot,{className:t,"data-streamdown":"table-wrapper",showControls:s,...n,children:e})},(e,t)=>M(e,t));Gt.displayName="MarkdownTable";var Yt=(0,y.memo)(({children:e,className:t,node:o,...n})=>(0,g.jsx)("thead",{className:f("bg-muted/80",t),"data-streamdown":"table-header",...n,children:e}),(e,t)=>M(e,t));Yt.displayName="MarkdownThead";var Qt=(0,y.memo)(({children:e,className:t,node:o,...n})=>(0,g.jsx)("tbody",{className:f("divide-y divide-border bg-muted/40",t),"data-streamdown":"table-body",...n,children:e}),(e,t)=>M(e,t));Qt.displayName="MarkdownTbody";var eo=(0,y.memo)(({children:e,className:t,node:o,...n})=>(0,g.jsx)("tr",{className:f("border-border border-b",t),"data-streamdown":"table-row",...n,children:e}),(e,t)=>M(e,t));eo.displayName="MarkdownTr";var to=(0,y.memo)(({children:e,className:t,node:o,...n})=>(0,g.jsx)("th",{className:f("whitespace-nowrap px-4 py-2 text-left font-semibold text-sm",t),"data-streamdown":"table-header-cell",...n,children:e}),(e,t)=>M(e,t));to.displayName="MarkdownTh";var oo=(0,y.memo)(({children:e,className:t,node:o,...n})=>(0,g.jsx)("td",{className:f("px-4 py-2 text-sm",t),"data-streamdown":"table-cell",...n,children:e}),(e,t)=>M(e,t));oo.displayName="MarkdownTd";var no=(0,y.memo)(({children:e,className:t,node:o,...n})=>(0,g.jsx)("blockquote",{className:f("my-4 border-muted-foreground/30 border-l-4 pl-4 text-muted-foreground italic",t),"data-streamdown":"blockquote",...n,children:e}),(e,t)=>M(e,t));no.displayName="MarkdownBlockquote";var ro=(0,y.memo)(({children:e,className:t,node:o,...n})=>(0,g.jsx)("sup",{className:f("text-sm",t),"data-streamdown":"superscript",...n,children:e}),(e,t)=>M(e,t));ro.displayName="MarkdownSup";var so=(0,y.memo)(({children:e,className:t,node:o,...n})=>(0,g.jsx)("sub",{className:f("text-sm",t),"data-streamdown":"subscript",...n,children:e}),(e,t)=>M(e,t));so.displayName="MarkdownSub";var io=(0,y.memo)(({children:e,className:t,node:o,...n})=>{if("data-footnotes"in n){let s=l=>{var p,h;if(!(0,y.isValidElement)(l))return!1;let c=Array.isArray(l.props.children)?l.props.children:[l.props.children],d=!1,m=!1;for(let u of c)if(u){if(typeof u=="string")u.trim()!==""&&(d=!0);else if((0,y.isValidElement)(u))if(((p=u.props)==null?void 0:p["data-footnote-backref"])!==void 0)m=!0;else{let b=Array.isArray(u.props.children)?u.props.children:[u.props.children];for(let w of b){if(typeof w=="string"&&w.trim()!==""){d=!0;break}if((0,y.isValidElement)(w)&&((h=w.props)==null?void 0:h["data-footnote-backref"])===void 0){d=!0;break}}}}return m&&!d},a=Array.isArray(e)?e.map(l=>{if(!(0,y.isValidElement)(l))return l;if(l.type===We){let d=(Array.isArray(l.props.children)?l.props.children:[l.props.children]).filter(m=>!s(m));return d.length===0?null:{...l,props:{...l.props,children:d}}}return l}):e;return(Array.isArray(a)?a.some(l=>l!==null):a!==null)?(0,g.jsx)("section",{className:t,...n,children:a}):null}return(0,g.jsx)("section",{className:t,...n,children:e})},(e,t)=>M(e,t));io.displayName="MarkdownSection";var dn=({node:e,className:t,children:o,...n})=>{var m,p,h;let r=((m=e==null?void 0:e.position)==null?void 0:m.start.line)===((p=e==null?void 0:e.position)==null?void 0:p.end.line),{mermaid:s,controls:a}=(0,y.useContext)(v);if(r)return(0,g.jsx)("code",{className:f("rounded bg-muted px-1.5 py-0.5 font-mono text-sm",t),"data-streamdown":"inline-code",...n,children:o});let i=t==null?void 0:t.match(cn),l=(h=i==null?void 0:i.at(1))!=null?h:"",c="";if((0,y.isValidElement)(o)&&o.props&&typeof o.props=="object"&&"children"in o.props&&typeof o.props.children=="string"?c=o.props.children:typeof o=="string"&&(c=o),l==="mermaid"){let u=Ue(a,"mermaid"),b=Fe(a,"download"),w=Fe(a,"copy"),C=Fe(a,"fullscreen");return(0,g.jsxs)("div",{className:f("group relative my-4 h-auto rounded-xl border p-4",t),"data-streamdown":"mermaid-block",children:[u&&(b||w||C)&&(0,g.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[b&&(0,g.jsx)(Lt,{chart:c,config:s==null?void 0:s.config}),w&&(0,g.jsx)(ze,{code:c}),C&&(0,g.jsx)(At,{chart:c,config:s==null?void 0:s.config})]}),(0,g.jsx)(we,{chart:c,config:s==null?void 0:s.config})]})}let d=Ue(a,"code");return(0,g.jsx)(vt,{className:f("overflow-x-auto border-border border-t",t),code:c,"data-language":l,"data-streamdown":"code-block",language:l,preClassName:"overflow-x-auto font-mono text-xs p-4 bg-muted/40",children:d&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(xt,{code:c,language:l}),(0,g.jsx)(ze,{})]})})},ao=(0,y.memo)(dn,(e,t)=>e.className===t.className&&Te(e.node,t.node));ao.displayName="MarkdownCode";var lo=(0,y.memo)(It,(e,t)=>e.className===t.className&&Te(e.node,t.node));lo.displayName="MarkdownImg";var co=(0,y.memo)(({children:e,className:t,node:o,...n})=>{var a;let s=(Array.isArray(e)?e:[e]).filter(i=>i!=null&&i!=="");return s.length===1&&(0,y.isValidElement)(s[0])&&((a=s[0].props.node)==null?void 0:a.tagName)==="img"?(0,g.jsx)(g.Fragment,{children:e}):(0,g.jsx)("p",{className:t,...n,children:e})},(e,t)=>M(e,t));co.displayName="MarkdownParagraph";var mo={ol:We,li:zt,ul:qt,hr:_t,strong:Ft,a:Ut,h1:Wt,h2:Vt,h3:Xt,h4:Jt,h5:Kt,h6:Zt,table:Gt,thead:Yt,tbody:Qt,tr:eo,th:to,td:oo,blockquote:no,code:ao,img:lo,pre:({children:e})=>e,sup:ro,sub:so,p:co,section:io};var Eo=require("hast-util-to-jsx-runtime"),ie=require("react/jsx-runtime"),Lo=E(require("remark-parse"),1),Ao=E(require("remark-rehype"),1);function Ve(e){if(e)throw e}var Ie=E(ko(),1);function me(e){if(typeof e!="object"||e===null)return!1;let t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Xe(){let e=[],t={run:o,use:n};return t;function o(...r){let s=-1,a=r.pop();if(typeof a!="function")throw new TypeError("Expected function as last argument, not "+a);i(null,...r);function i(l,...c){let d=e[++s],m=-1;if(l){a(l);return}for(;++m<r.length;)(c[m]===null||c[m]===void 0)&&(c[m]=r[m]);r=c,d?Co(d,i)(...c):a(null,...c)}}function n(r){if(typeof r!="function")throw new TypeError("Expected `middelware` to be a function, not "+r);return e.push(r),t}}function Co(e,t){let o;return n;function n(...a){let i=e.length>a.length,l;i&&a.push(r);try{l=e.apply(this,a)}catch(c){let d=c;if(i&&o)throw d;return r(d)}i||(l&&l.then&&typeof l.then=="function"?l.then(s,r):l instanceof Error?r(l):s(l))}function r(a,...i){o||(o=!0,t(a,...i))}function s(a){r(null,a)}}function Ke(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?vo(e.position):"start"in e||"end"in e?vo(e):"line"in e||"column"in e?Je(e):""}function Je(e){return Mo(e&&e.line)+":"+Mo(e&&e.column)}function vo(e){return Je(e&&e.start)+"-"+Je(e&&e.end)}function Mo(e){return e&&typeof e=="number"?e:1}var x=class extends Error{constructor(t,o,n){super(),typeof o=="string"&&(n=o,o=void 0);let r="",s={},a=!1;if(o&&("line"in o&&"column"in o?s={place:o}:"start"in o&&"end"in o?s={place:o}:"type"in o?s={ancestors:[o],place:o.position}:s={...o}),typeof t=="string"?r=t:!s.cause&&t&&(a=!0,r=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof n=="string"){let l=n.indexOf(":");l===-1?s.ruleId=n:(s.source=n.slice(0,l),s.ruleId=n.slice(l+1))}if(!s.place&&s.ancestors&&s.ancestors){let l=s.ancestors[s.ancestors.length-1];l&&(s.place=l.position)}let i=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=i?i.column:void 0,this.fatal=void 0,this.file="",this.message=r,this.line=i?i.line:void 0,this.name=Ke(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=a&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}};x.prototype.file="";x.prototype.name="";x.prototype.reason="";x.prototype.message="";x.prototype.stack="";x.prototype.column=void 0;x.prototype.line=void 0;x.prototype.ancestors=void 0;x.prototype.cause=void 0;x.prototype.fatal=void 0;x.prototype.place=void 0;x.prototype.ruleId=void 0;x.prototype.source=void 0;var A=E(require("path"),1);var Ze=E(require("process"),1);var Ge=require("url");function xe(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}var Ye=["history","path","basename","stem","extname","dirname"],pe=class{constructor(t){let o;t?xe(t)?o={path:t}:typeof t=="string"||mn(t)?o={value:t}:o=t:o={},this.cwd="cwd"in o?"":Ze.default.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let n=-1;for(;++n<Ye.length;){let s=Ye[n];s in o&&o[s]!==void 0&&o[s]!==null&&(this[s]=s==="history"?[...o[s]]:o[s])}let r;for(r in o)Ye.includes(r)||(this[r]=o[r])}get basename(){return typeof this.path=="string"?A.default.basename(this.path):void 0}set basename(t){et(t,"basename"),Qe(t,"basename"),this.path=A.default.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?A.default.dirname(this.path):void 0}set dirname(t){To(this.basename,"dirname"),this.path=A.default.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?A.default.extname(this.path):void 0}set extname(t){if(Qe(t,"extname"),To(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=A.default.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){xe(t)&&(t=(0,Ge.fileURLToPath)(t)),et(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?A.default.basename(this.path,this.extname):void 0}set stem(t){et(t,"stem"),Qe(t,"stem"),this.path=A.default.join(this.dirname||"",t+(this.extname||""))}fail(t,o,n){let r=this.message(t,o,n);throw r.fatal=!0,r}info(t,o,n){let r=this.message(t,o,n);return r.fatal=void 0,r}message(t,o,n){let r=new x(t,o,n);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}};function Qe(e,t){if(e&&e.includes(A.default.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+A.default.sep+"`")}function et(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function To(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function mn(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}var Po=(function(e){let n=this.constructor.prototype,r=n[e],s=function(){return r.apply(s,arguments)};return Object.setPrototypeOf(s,n),s});var pn={}.hasOwnProperty,rt=class e extends Po{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Xe()}copy(){let t=new e,o=-1;for(;++o<this.attachers.length;){let n=this.attachers[o];t.use(...n)}return t.data((0,Ie.default)(!0,{},this.namespace)),t}data(t,o){return typeof t=="string"?arguments.length===2?(nt("data",this.frozen),this.namespace[t]=o,this):pn.call(this.namespace,t)&&this.namespace[t]||void 0:t?(nt("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;let t=this;for(;++this.freezeIndex<this.attachers.length;){let[o,...n]=this.attachers[this.freezeIndex];if(n[0]===!1)continue;n[0]===!0&&(n[0]=void 0);let r=o.call(t,...n);typeof r=="function"&&this.transformers.use(r)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();let o=Ne(t),n=this.parser||this.Parser;return tt("parse",n),n(String(o),o)}process(t,o){let n=this;return this.freeze(),tt("process",this.parser||this.Parser),ot("process",this.compiler||this.Compiler),o?r(void 0,o):new Promise(r);function r(s,a){let i=Ne(t),l=n.parse(i);n.run(l,i,function(d,m,p){if(d||!m||!p)return c(d);let h=m,u=n.stringify(h,p);fn(u)?p.value=u:p.result=u,c(d,p)});function c(d,m){d||!m?a(d):s?s(m):o(void 0,m)}}}processSync(t){let o=!1,n;return this.freeze(),tt("processSync",this.parser||this.Parser),ot("processSync",this.compiler||this.Compiler),this.process(t,r),No("processSync","process",o),n;function r(s,a){o=!0,Ve(s),n=a}}run(t,o,n){xo(t),this.freeze();let r=this.transformers;return!n&&typeof o=="function"&&(n=o,o=void 0),n?s(void 0,n):new Promise(s);function s(a,i){let l=Ne(o);r.run(t,l,c);function c(d,m,p){let h=m||t;d?i(d):a?a(h):n(void 0,h,p)}}}runSync(t,o){let n=!1,r;return this.run(t,o,s),No("runSync","run",n),r;function s(a,i){Ve(a),r=i,n=!0}}stringify(t,o){this.freeze();let n=Ne(o),r=this.compiler||this.Compiler;return ot("stringify",r),xo(t),r(t,n)}use(t,...o){let n=this.attachers,r=this.namespace;if(nt("use",this.frozen),t!=null)if(typeof t=="function")l(t,o);else if(typeof t=="object")Array.isArray(t)?i(t):a(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(c){if(typeof c=="function")l(c,[]);else if(typeof c=="object")if(Array.isArray(c)){let[d,...m]=c;l(d,m)}else a(c);else throw new TypeError("Expected usable value, not `"+c+"`")}function a(c){if(!("plugins"in c)&&!("settings"in c))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");i(c.plugins),c.settings&&(r.settings=(0,Ie.default)(!0,r.settings,c.settings))}function i(c){let d=-1;if(c!=null)if(Array.isArray(c))for(;++d<c.length;){let m=c[d];s(m)}else throw new TypeError("Expected a list of plugins, not `"+c+"`")}function l(c,d){let m=-1,p=-1;for(;++m<n.length;)if(n[m][0]===c){p=m;break}if(p===-1)n.push([c,...d]);else if(d.length>0){let[h,...u]=d,b=n[p][1];me(b)&&me(h)&&(h=(0,Ie.default)(!0,b,h)),n[p]=[c,h,...u]}}}},st=new rt().freeze();function tt(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function ot(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function nt(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function xo(e){if(!me(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function No(e,t,o){if(!o)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Ne(e){return un(e)?e:new pe(e)}function un(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function fn(e){return typeof e=="string"||hn(e)}function hn(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}var Io=[],So={allowDangerousHtml:!0},Se=new WeakMap,it=class{constructor(){this.cache=new Map;this.keyCache=new WeakMap;this.maxSize=100}generateCacheKey(t){let o=this.keyCache.get(t);if(o)return o;let n=t.rehypePlugins,r=t.remarkPlugins,s=t.remarkRehypeOptions;if(!(n||r||s)){let m="default";return this.keyCache.set(t,m),m}let a=m=>{if(!m||m.length===0)return"";let p="";for(let h=0;h<m.length;h+=1){let u=m[h];if(h>0&&(p+=","),Array.isArray(u)){let[b,w]=u;if(typeof b=="function"){let C=Se.get(b);C||(C=b.name,Se.set(b,C)),p+=C}else p+=String(b);p+=":",p+=JSON.stringify(w)}else if(typeof u=="function"){let b=Se.get(u);b||(b=u.name,Se.set(u,b)),p+=b}else p+=String(u)}return p},i=a(n),l=a(r),c=s?JSON.stringify(s):"",d=`${l}::${i}::${c}`;return this.keyCache.set(t,d),d}get(t){let o=this.generateCacheKey(t),n=this.cache.get(o);return n&&(this.cache.delete(o),this.cache.set(o,n)),n}set(t,o){let n=this.generateCacheKey(t);if(this.cache.size>=this.maxSize){let r=this.cache.keys().next().value;r&&this.cache.delete(r)}this.cache.set(n,o)}clear(){this.cache.clear()}},Bo=new it,at=e=>{let t=gn(e),o=e.children||"";return yn(t.runSync(t.parse(o),o),e)},gn=e=>{let t=Bo.get(e);if(t)return t;let o=bn(e);return Bo.set(e,o),o},bn=e=>{let t=e.rehypePlugins||Io,o=e.remarkPlugins||Io,n=e.remarkRehypeOptions?{...So,...e.remarkRehypeOptions}:So;return st().use(Lo.default).use(o).use(Ao.default,n).use(t)},yn=(e,t)=>(0,Eo.toJsxRuntime)(e,{Fragment:ie.Fragment,components:t.components,ignoreInvalidStyle:!0,jsx:ie.jsx,jsxs:ie.jsxs,passKeys:!0,passNode:!0});var Ro=require("marked"),wn=/\[\^[^\]\s]{1,200}\](?!:)/,kn=/\[\^[^\]\s]{1,200}\]:/,Cn=/<\/(\w+)>/,vn=/<(\w+)[\s>]/,lt=e=>{let t=0;for(;t<e.length&&(e[t]===" "||e[t]==="	"||e[t]===`
`||e[t]==="\r");)t+=1;return t+1<e.length&&e[t]==="$"&&e[t+1]==="$"},Mn=e=>{let t=e.length-1;for(;t>=0&&(e[t]===" "||e[t]==="	"||e[t]===`
`||e[t]==="\r");)t-=1;return t>=1&&e[t]==="$"&&e[t-1]==="$"},ct=e=>{let t=0;for(let o=0;o<e.length-1;o+=1)e[o]==="$"&&e[o+1]==="$"&&(t+=1,o+=1);return t},Be=e=>{let t=wn.test(e),o=kn.test(e);if(t||o)return[e];let n=Ro.Lexer.lex(e,{gfm:!0}),r=[],s=[];for(let a of n){let i=a.raw,l=r.length;if(s.length>0){if(r[l-1]+=i,a.type==="html"){let d=i.match(Cn);if(d){let m=d[1];s.at(-1)===m&&s.pop()}}continue}if(a.type==="html"&&a.block){let d=i.match(vn);if(d){let m=d[1];i.includes(`</${m}>`)||s.push(m)}}if(i.trim()==="$$"&&l>0){let d=r[l-1],m=lt(d),p=ct(d);if(m&&p%2===1){r[l-1]=d+i;continue}}if(l>0&&Mn(i)){let d=r[l-1],m=lt(d),p=ct(d),h=ct(i);if(m&&p%2===1&&!lt(i)&&h===1){r[l-1]=d+i;continue}}r.push(i)}return r};var Tn=/(\*\*)([^*]*?)$/,Pn=/(__)([^_]*?)$/,xn=/(\*\*\*)([^*]*?)$/,Nn=/(\*)([^*]*?)$/,In=/(_)([^_]*?)$/,Sn=/(`)([^`]*?)$/,Bn=/(~~)([^~]*?)$/,ee=/^[\s_~*`]*$/,jo=/^[\s]*[-*+][\s]+$/,En=/[\p{L}\p{N}_]/u,Ln=/^```[^`\n]*```?$/,An=/^\*{4,}$/,K=e=>{if(!e)return!1;let t=e.charCodeAt(0);return t>=48&&t<=57||t>=65&&t<=90||t>=97&&t<=122||t===95?!0:En.test(e)},Ee=e=>{let t=(e.match(/```/g)||[]).length;return t>0&&t%2===0&&e.includes(`
`)};var Rn=(e,t)=>{let o=1;for(let n=t-1;n>=0;n-=1)if(e[n]==="]")o+=1;else if(e[n]==="["&&(o-=1,o===0))return n;return-1},jn=(e,t)=>{let o=1;for(let n=t+1;n<e.length;n+=1)if(e[n]==="[")o+=1;else if(e[n]==="]"&&(o-=1,o===0))return n;return-1},dt=(e,t)=>{let o=!1,n=!1;for(let r=0;r<t;r+=1){if(e.substring(r,r+3)==="```"){n=!n,r+=2;continue}!n&&e[r]==="`"&&(o=!o)}return o||n},$n=e=>{let t=e.lastIndexOf("](");if(t!==-1&&!dt(e,t)&&!e.substring(t+2).includes(")")){let n=Rn(e,t);if(n!==-1&&!dt(e,n)){let r=n>0&&e[n-1]==="!",s=r?n-1:n,a=e.substring(0,s),i=e.substring(n+1,t);return r?a:`${a}[${i}](streamdown:incomplete-link)`}}for(let o=e.length-1;o>=0;o-=1)if(e[o]==="["&&!dt(e,o)){let n=o>0&&e[o-1]==="!",r=n?o-1:o;if(!e.substring(o+1).includes("]")){let i=e.substring(0,r);return n?i:`${e}](streamdown:incomplete-link)`}if(jn(e,o)===-1){let i=e.substring(0,r);return n?i:`${e}](streamdown:incomplete-link)`}}return e},Dn=e=>{if(Ee(e))return e;let t=e.match(Tn);if(t){let o=t[2];if(!o||ee.test(o))return e;let n=e.lastIndexOf(t[1]),s=e.substring(0,n).lastIndexOf(`
`),a=s===-1?0:s+1,i=e.substring(a,n);if(jo.test(i)&&o.includes(`
`))return e;if((e.match(/\*\*/g)||[]).length%2===1)return`${e}**`}return e},Hn=e=>{let t=e.match(Pn);if(t){let o=t[2];if(!o||ee.test(o))return e;let n=e.lastIndexOf(t[1]),s=e.substring(0,n).lastIndexOf(`
`),a=s===-1?0:s+1,i=e.substring(a,n);if(jo.test(i)&&o.includes(`
`))return e;if((e.match(/__/g)||[]).length%2===1)return`${e}__`}return e},On=e=>{let t=0,o=e.length;for(let n=0;n<o;n+=1){if(e[n]!=="*")continue;let r=n>0?e[n-1]:"",s=n<o-1?e[n+1]:"";if(r==="\\"||r==="*"||s==="*"||r&&s&&K(r)&&K(s))continue;let a=0;for(let l=n-1;l>=0;l-=1)if(e[l]===`
`){a=l+1;break}let i=!0;for(let l=a;l<n;l+=1)if(e[l]!==" "&&e[l]!=="	"){i=!1;break}i&&(s===" "||s==="	")||(t+=1)}return t},zn=e=>{if(Ee(e))return e;if(e.match(Nn)){let o=-1;for(let s=0;s<e.length;s+=1)if(e[s]==="*"&&e[s-1]!=="*"&&e[s+1]!=="*"&&e[s-1]!=="\\"){let a=s>0?e[s-1]:"",i=s<e.length-1?e[s+1]:"";if(a&&i&&K(a)&&K(i))continue;o=s;break}if(o===-1)return e;let n=e.substring(o+1);if(!n||ee.test(n))return e;if(On(e)%2===1)return`${e}*`}return e},$o=(e,t)=>{let o=!1,n=!1;for(let r=0;r<e.length&&r<t;r+=1){if(e[r]==="\\"&&e[r+1]==="$"){r+=1;continue}e[r]==="$"&&(e[r+1]==="$"?(n=!n,r+=1,o=!1):n||(o=!o))}return o||n},qn=e=>{let t=e.includes("$"),o=0,n=e.length;for(let r=0;r<n;r+=1){if(e[r]!=="_")continue;let s=r>0?e[r-1]:"",a=r<n-1?e[r+1]:"";s!=="\\"&&(t&&$o(e,r)||s==="_"||a==="_"||s&&a&&K(s)&&K(a)||(o+=1))}return o},_n=e=>{if(Ee(e))return e;if(e.match(In)){let o=-1;for(let s=0;s<e.length;s+=1)if(e[s]==="_"&&e[s-1]!=="_"&&e[s+1]!=="_"&&e[s-1]!=="\\"&&!$o(e,s)){let a=s>0?e[s-1]:"",i=s<e.length-1?e[s+1]:"";if(a&&i&&K(a)&&K(i))continue;o=s;break}if(o===-1)return e;let n=e.substring(o+1);if(!n||ee.test(n))return e;if(qn(e)%2===1){let s=e.length;for(;s>0&&e[s-1]===`
`;)s-=1;if(s<e.length){let a=e.slice(0,s),i=e.slice(s);return`${a}_${i}`}return`${e}_`}}return e},Fn=(e,t)=>{let o=e.substring(t,t+3)==="```",n=t>0&&e.substring(t-1,t+2)==="```",r=t>1&&e.substring(t-2,t+1)==="```";return o||n||r},Un=e=>{let t=0;for(let o=0;o<e.length;o+=1)e[o]==="`"&&!Fn(e,o)&&(t+=1);return t},Wn=e=>{if(e.match(Ln)&&!e.includes(`
`))return e.endsWith("``")&&!e.endsWith("```")?`${e}\``:e;let o=(e.match(/```/g)||[]).length,n=o%2===1;if(o>0&&o%2===0&&e.includes(`
`)||(e.endsWith("```\n")||e.endsWith("```"))&&o%2===0)return e;let r=e.match(Sn);if(r&&!n){let s=r[2];if(!s||ee.test(s))return e;if(Un(e)%2===1)return`${e}\``}return e},Vn=e=>{let t=e.match(Bn);if(t){let o=t[2];if(!o||ee.test(o))return e;if((e.match(/~~/g)||[]).length%2===1)return`${e}~~`}return e},Xn=e=>{if((e.match(/\$\$/g)||[]).length%2===0)return e;let o=e.indexOf("$$");return o!==-1&&e.indexOf(`
`,o)!==-1&&!e.endsWith(`
`)?`${e}
$$`:`${e}$$`},Jn=e=>{let t=0,o=0;for(let n=0;n<e.length;n+=1)e[n]==="*"?o+=1:(o>=3&&(t+=Math.floor(o/3)),o=0);return o>=3&&(t+=Math.floor(o/3)),t},Kn=e=>{if(Ee(e)||An.test(e))return e;let t=e.match(xn);if(t){let o=t[2];if(!o||ee.test(o))return e;if(Jn(e)%2===1)return`${e}***`}return e},Le=e=>{if(!e||typeof e!="string")return e;let t=e,o=$n(t);return o.endsWith("](streamdown:incomplete-link)")?o:(t=o,t=Kn(t),t=Dn(t),t=Hn(t),t=zn(t),t=_n(t),t=Wn(t),t=Vn(t),t=Xn(t),t)};var Z=require("react/jsx-runtime"),Fo={harden:[Do.harden,{allowedImagePrefixes:["*"],allowedLinkPrefixes:["*"],defaultOrigin:void 0,allowDataImages:!0}],raw:Ho.default,katex:[Ae.default,{errorColor:"var(--color-muted-foreground)"}]},Uo={gfm:[qo.default,{}],math:[_o.default,{singleDollarTextMath:!1}],cjkFriendly:[Oo.default,{}],cjkFriendlyGfmStrikethrough:[zo.default,{}]},Zn=Object.values(Fo),Gn=Object.values(Uo),Yn={shikiTheme:["github-light","github-dark"],controls:!0,isAnimating:!1,mode:"streaming",mermaid:void 0},v=(0,P.createContext)(Yn),mt=(0,P.memo)(({content:e,shouldParseIncompleteMarkdown:t,...o})=>{let n=(0,P.useMemo)(()=>typeof e=="string"&&t?Le(e.trim()):e,[e,t]);return(0,Z.jsx)(at,{...o,children:n})},(e,t)=>{if(e.content!==t.content||e.shouldParseIncompleteMarkdown!==t.shouldParseIncompleteMarkdown||e.index!==t.index)return!1;if(e.components!==t.components){let o=Object.keys(e.components||{}),n=Object.keys(t.components||{});if(o.length!==n.length||o.some(r=>{var s,a;return((s=e.components)==null?void 0:s[r])!==((a=t.components)==null?void 0:a[r])}))return!1}return!(e.rehypePlugins!==t.rehypePlugins||e.remarkPlugins!==t.remarkPlugins)});mt.displayName="Block";var Qn=["github-light","github-dark"],Wo=(0,P.memo)(({children:e,mode:t="streaming",parseIncompleteMarkdown:o=!0,components:n,rehypePlugins:r=Zn,remarkPlugins:s=Gn,className:a,shikiTheme:i=Qn,mermaid:l,controls:c=!0,isAnimating:d=!1,BlockComponent:m=mt,parseMarkdownIntoBlocksFn:p=Be,...h})=>{let u=(0,P.useId)(),[b,w]=(0,P.useTransition)(),[C,N]=(0,P.useState)([]),B=(0,P.useMemo)(()=>p(typeof e=="string"?e:""),[e,p]);(0,P.useEffect)(()=>{t==="streaming"?w(()=>{N(B)}):N(B)},[B,t]);let I=t==="streaming"?C:B,q=(0,P.useMemo)(()=>I.map(($,oe)=>`${u}-${oe}`),[I.length,u]),G=(0,P.useMemo)(()=>({shikiTheme:i,controls:c,isAnimating:d,mode:t,mermaid:l}),[i,c,d,t,l]),te=(0,P.useMemo)(()=>({...mo,...n}),[n]);return(0,P.useEffect)(()=>{Array.isArray(r)&&r.some($=>Array.isArray($)?$[0]===Ae.default:$===Ae.default)&&import("katex/dist/katex.min.css")},[r]),t==="static"?(0,Z.jsx)(v.Provider,{value:G,children:(0,Z.jsx)("div",{className:f("space-y-4",a),children:(0,Z.jsx)(at,{components:te,rehypePlugins:r,remarkPlugins:s,...h,children:e})})}):(0,Z.jsx)(v.Provider,{value:G,children:(0,Z.jsx)("div",{className:f("space-y-4",a),children:I.map(($,oe)=>(0,Z.jsx)(m,{components:te,content:$,index:oe,rehypePlugins:r,remarkPlugins:s,shouldParseIncompleteMarkdown:o,...h},q[oe]))})})},(e,t)=>e.children===t.children&&e.shikiTheme===t.shikiTheme&&e.isAnimating===t.isAnimating&&e.mode===t.mode);Wo.displayName="Streamdown";0&&(module.exports={Block,Streamdown,StreamdownContext,defaultRehypePlugins,defaultRemarkPlugins,parseIncompleteMarkdown,parseMarkdownIntoBlocks});
