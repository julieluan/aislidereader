{"version":3,"file":"lib.module.js","sources":["../src/scribe.ts","../src/index.ts","../src/version.ts"],"sourcesContent":["import { useEffect, useRef, useState, useCallback } from \"react\";\nimport { Scribe, RealtimeEvents } from \"@elevenlabs/client\";\nimport type {\n  RealtimeConnection,\n  AudioOptions,\n  MicrophoneOptions,\n  AudioFormat,\n  CommitStrategy,\n  PartialTranscriptMessage,\n  CommittedTranscriptMessage,\n  CommittedTranscriptWithTimestampsMessage,\n  ScribeErrorMessage,\n  ScribeAuthErrorMessage,\n  ScribeQuotaExceededErrorMessage,\n} from \"@elevenlabs/client\";\n\n// ============= Types =============\n\nexport type ScribeStatus =\n  | \"disconnected\"\n  | \"connecting\"\n  | \"connected\"\n  | \"transcribing\"\n  | \"error\";\n\nexport interface TranscriptSegment {\n  id: string;\n  text: string;\n  timestamp: number;\n  isFinal: boolean;\n}\n\nexport interface ScribeCallbacks {\n  onSessionStarted?: () => void;\n  onPartialTranscript?: (data: { text: string }) => void;\n  onCommittedTranscript?: (data: { text: string }) => void;\n  onCommittedTranscriptWithTimestamps?: (data: {\n    text: string;\n    timestamps?: { start: number; end: number }[];\n  }) => void;\n  onError?: (error: Error | Event) => void;\n  onAuthError?: (data: { error: string }) => void;\n  onQuotaExceededError?: (data: { error: string }) => void;\n  onConnect?: () => void;\n  onDisconnect?: () => void;\n}\n\nexport interface ScribeHookOptions extends ScribeCallbacks {\n  // Connection options\n  token?: string;\n  modelId?: string;\n  baseUri?: string;\n\n  // VAD options\n  commitStrategy?: CommitStrategy;\n  vadSilenceThresholdSecs?: number;\n  vadThreshold?: number;\n  minSpeechDurationMs?: number;\n  minSilenceDurationMs?: number;\n  languageCode?: string;\n\n  // Microphone options (for automatic microphone mode)\n  microphone?: {\n    deviceId?: string;\n    echoCancellation?: boolean;\n    noiseSuppression?: boolean;\n    autoGainControl?: boolean;\n    channelCount?: number;\n  };\n\n  // Manual audio options\n  audioFormat?: AudioFormat;\n  sampleRate?: number;\n\n  // Auto-connect on mount\n  autoConnect?: boolean;\n\n  // Include timestamps\n  includeTimestamps?: boolean;\n}\n\nexport interface UseScribeReturn {\n  // State\n  status: ScribeStatus;\n  isConnected: boolean;\n  isTranscribing: boolean;\n  partialTranscript: string;\n  committedTranscripts: TranscriptSegment[];\n  error: string | null;\n\n  // Connection methods\n  connect: (options?: Partial<ScribeHookOptions>) => Promise<void>;\n  disconnect: () => void;\n\n  // Audio methods (for manual mode)\n  sendAudio: (\n    audioBase64: string,\n    options?: { commit?: boolean; sampleRate?: number }\n  ) => void;\n  commit: () => void;\n\n  // Utility methods\n  clearTranscripts: () => void;\n  getConnection: () => RealtimeConnection | null;\n}\n\n// ============= Hook Implementation =============\n\nexport function useScribe(options: ScribeHookOptions = {}): UseScribeReturn {\n  const {\n    // Callbacks\n    onSessionStarted,\n    onPartialTranscript,\n    onCommittedTranscript,\n    onCommittedTranscriptWithTimestamps,\n    onError,\n    onAuthError,\n    onConnect,\n    onDisconnect,\n    onQuotaExceededError,\n\n    // Connection options\n    token: defaultToken,\n    modelId: defaultModelId,\n    baseUri: defaultBaseUri,\n    commitStrategy: defaultCommitStrategy,\n    vadSilenceThresholdSecs: defaultVadSilenceThresholdSecs,\n    vadThreshold: defaultVadThreshold,\n    minSpeechDurationMs: defaultMinSpeechDurationMs,\n    minSilenceDurationMs: defaultMinSilenceDurationMs,\n    languageCode: defaultLanguageCode,\n\n    // Mode options\n    microphone: defaultMicrophone,\n    audioFormat: defaultAudioFormat,\n    sampleRate: defaultSampleRate,\n\n    // Auto-connect\n    autoConnect = false,\n  } = options;\n\n  const connectionRef = useRef<RealtimeConnection | null>(null);\n\n  const [status, setStatus] = useState<ScribeStatus>(\"disconnected\");\n  const [partialTranscript, setPartialTranscript] = useState<string>(\"\");\n  const [committedTranscripts, setCommittedTranscripts] = useState<\n    TranscriptSegment[]\n  >([]);\n  const [error, setError] = useState<string | null>(null);\n\n  // Cleanup on unmount\n  useEffect(() => {\n    return () => {\n      connectionRef.current?.close();\n    };\n  }, []);\n\n  const connect = useCallback(\n    async (runtimeOptions: Partial<ScribeHookOptions> = {}) => {\n      if (connectionRef.current) {\n        console.warn(\"Already connected\");\n        return;\n      }\n\n      try {\n        setStatus(\"connecting\");\n        setError(null);\n\n        // Merge default options with runtime options\n        const token = runtimeOptions.token || defaultToken;\n        const modelId = runtimeOptions.modelId || defaultModelId;\n\n        if (!token) {\n          throw new Error(\"Token is required\");\n        }\n        if (!modelId) {\n          throw new Error(\"Model ID is required\");\n        }\n\n        // Determine mode: microphone or manual\n        const microphone = runtimeOptions.microphone || defaultMicrophone;\n        const audioFormat = runtimeOptions.audioFormat || defaultAudioFormat;\n        const sampleRate = runtimeOptions.sampleRate || defaultSampleRate;\n\n        let connection: RealtimeConnection;\n\n        // Determine if timestamps should be included based on whether the callback was provided\n        // We do this instead of providing includeTimestamps as we can assume that if the callback is provided, the user wants timestamps\n        const includeTimestamps = !!(\n          runtimeOptions.onCommittedTranscriptWithTimestamps ||\n          onCommittedTranscriptWithTimestamps\n        );\n\n        if (microphone) {\n          // Microphone mode\n          connection = Scribe.connect({\n            token,\n            modelId,\n            baseUri: runtimeOptions.baseUri || defaultBaseUri,\n            commitStrategy:\n              runtimeOptions.commitStrategy || defaultCommitStrategy,\n            vadSilenceThresholdSecs:\n              runtimeOptions.vadSilenceThresholdSecs ||\n              defaultVadSilenceThresholdSecs,\n            vadThreshold: runtimeOptions.vadThreshold || defaultVadThreshold,\n            minSpeechDurationMs:\n              runtimeOptions.minSpeechDurationMs || defaultMinSpeechDurationMs,\n            minSilenceDurationMs:\n              runtimeOptions.minSilenceDurationMs ||\n              defaultMinSilenceDurationMs,\n            languageCode: runtimeOptions.languageCode || defaultLanguageCode,\n            microphone,\n            includeTimestamps,\n          } as MicrophoneOptions);\n        } else if (audioFormat && sampleRate) {\n          // Manual audio mode\n          connection = Scribe.connect({\n            token,\n            modelId,\n            baseUri: runtimeOptions.baseUri || defaultBaseUri,\n            commitStrategy:\n              runtimeOptions.commitStrategy || defaultCommitStrategy,\n            vadSilenceThresholdSecs:\n              runtimeOptions.vadSilenceThresholdSecs ||\n              defaultVadSilenceThresholdSecs,\n            vadThreshold: runtimeOptions.vadThreshold || defaultVadThreshold,\n            minSpeechDurationMs:\n              runtimeOptions.minSpeechDurationMs || defaultMinSpeechDurationMs,\n            minSilenceDurationMs:\n              runtimeOptions.minSilenceDurationMs ||\n              defaultMinSilenceDurationMs,\n            languageCode: runtimeOptions.languageCode || defaultLanguageCode,\n            includeTimestamps,\n            audioFormat,\n            sampleRate,\n          } as AudioOptions);\n        } else {\n          throw new Error(\n            \"Either microphone options or (audioFormat + sampleRate) must be provided\"\n          );\n        }\n\n        connectionRef.current = connection;\n\n        // Set up event listeners\n        connection.on(RealtimeEvents.SESSION_STARTED, () => {\n          setStatus(\"connected\");\n          onSessionStarted?.();\n        });\n\n        connection.on(RealtimeEvents.PARTIAL_TRANSCRIPT, (data: unknown) => {\n          const message = data as PartialTranscriptMessage;\n          setPartialTranscript(message.text);\n          setStatus(\"transcribing\");\n          onPartialTranscript?.(message);\n        });\n\n        connection.on(RealtimeEvents.COMMITTED_TRANSCRIPT, (data: unknown) => {\n          const message = data as CommittedTranscriptMessage;\n          const segment: TranscriptSegment = {\n            id: `${Date.now()}-${Math.random()}`,\n            text: message.text,\n            timestamp: Date.now(),\n            isFinal: true,\n          };\n          setCommittedTranscripts(prev => [...prev, segment]);\n          setPartialTranscript(\"\");\n          onCommittedTranscript?.(message);\n        });\n\n        connection.on(\n          RealtimeEvents.COMMITTED_TRANSCRIPT_WITH_TIMESTAMPS,\n          (data: unknown) => {\n            const message = data as CommittedTranscriptWithTimestampsMessage;\n            const segment: TranscriptSegment = {\n              id: `${Date.now()}-${Math.random()}`,\n              text: message.text,\n              timestamp: Date.now(),\n              isFinal: true,\n            };\n            setCommittedTranscripts(prev => [...prev, segment]);\n            setPartialTranscript(\"\");\n            onCommittedTranscriptWithTimestamps?.(message);\n          }\n        );\n\n        connection.on(RealtimeEvents.ERROR, (err: unknown) => {\n          const message = err as ScribeErrorMessage;\n          setError(message.error);\n          setStatus(\"error\");\n          onError?.(new Error(message.error));\n        });\n\n        connection.on(RealtimeEvents.AUTH_ERROR, (data: unknown) => {\n          const message = data as ScribeAuthErrorMessage;\n          setError(message.error);\n          setStatus(\"error\");\n          onAuthError?.(message);\n        });\n\n        connection.on(RealtimeEvents.QUOTA_EXCEEDED, (data: unknown) => {\n          const message = data as ScribeQuotaExceededErrorMessage;\n          setError(message.error);\n          setStatus(\"error\");\n          onQuotaExceededError?.(message);\n        });\n\n        connection.on(RealtimeEvents.OPEN, () => {\n          onConnect?.();\n        });\n\n        connection.on(RealtimeEvents.CLOSE, () => {\n          setStatus(\"disconnected\");\n          connectionRef.current = null;\n          onDisconnect?.();\n        });\n      } catch (err) {\n        const errorMessage =\n          err instanceof Error ? err.message : \"Failed to connect\";\n        setError(errorMessage);\n        setStatus(\"error\");\n        throw err;\n      }\n    },\n    [\n      defaultToken,\n      defaultModelId,\n      defaultBaseUri,\n      defaultCommitStrategy,\n      defaultVadSilenceThresholdSecs,\n      defaultVadThreshold,\n      defaultMinSpeechDurationMs,\n      defaultMinSilenceDurationMs,\n      defaultLanguageCode,\n      defaultMicrophone,\n      defaultAudioFormat,\n      defaultSampleRate,\n      onSessionStarted,\n      onPartialTranscript,\n      onCommittedTranscript,\n      onCommittedTranscriptWithTimestamps,\n      onError,\n      onAuthError,\n      onConnect,\n      onDisconnect,\n      onQuotaExceededError,\n    ]\n  );\n\n  const disconnect = useCallback(() => {\n    connectionRef.current?.close();\n    connectionRef.current = null;\n    setStatus(\"disconnected\");\n  }, []);\n\n  const sendAudio = useCallback(\n    (\n      audioBase64: string,\n      options?: { commit?: boolean; sampleRate?: number }\n    ) => {\n      if (!connectionRef.current) {\n        throw new Error(\"Not connected to Scribe\");\n      }\n      connectionRef.current.send({ audioBase64, ...options });\n    },\n    []\n  );\n\n  const commit = useCallback(() => {\n    if (!connectionRef.current) {\n      throw new Error(\"Not connected to Scribe\");\n    }\n    connectionRef.current.commit();\n  }, []);\n\n  const clearTranscripts = useCallback(() => {\n    setCommittedTranscripts([]);\n    setPartialTranscript(\"\");\n  }, []);\n\n  const getConnection = useCallback(() => {\n    return connectionRef.current;\n  }, []);\n\n  // Auto-connect if enabled\n  useEffect(() => {\n    if (autoConnect) {\n      connect();\n    }\n  }, [autoConnect, connect]);\n\n  return {\n    // State\n    status,\n    isConnected: status === \"connected\" || status === \"transcribing\",\n    isTranscribing: status === \"transcribing\",\n    partialTranscript,\n    committedTranscripts,\n    error,\n\n    // Methods\n    connect,\n    disconnect,\n    sendAudio,\n    commit,\n    clearTranscripts,\n    getConnection,\n  };\n}\n\n// Export types and enums from client for convenience\nexport {\n  AudioFormat,\n  CommitStrategy,\n  RealtimeEvents,\n} from \"@elevenlabs/client\";\nexport type { RealtimeConnection } from \"@elevenlabs/client\";\n","import { useEffect, useRef, useState } from \"react\";\nimport {\n  Conversation,\n  type SessionConfig,\n  type Options,\n  type ClientToolsConfig,\n  type InputConfig,\n  type AudioWorkletConfig,\n  type OutputConfig,\n  type FormatConfig,\n  type Mode,\n  type Status,\n  type Callbacks,\n} from \"@elevenlabs/client\";\n\n// Device configuration types for audio device switching\nexport type DeviceFormatConfig = {\n  format: \"pcm\" | \"ulaw\";\n  sampleRate: number;\n  outputDeviceId?: string;\n};\n\nexport type DeviceInputConfig = {\n  preferHeadphonesForIosDevices?: boolean;\n  inputDeviceId?: string;\n};\n\nimport { PACKAGE_VERSION } from \"./version\";\n\nexport type Location = \"us\" | \"global\" | \"eu-residency\" | \"in-residency\";\n\nexport function parseLocation(location: string = \"us\"): Location {\n  switch (location) {\n    case \"eu-residency\":\n    case \"in-residency\":\n    case \"us\":\n    case \"global\":\n      return location;\n    default:\n      console.warn(\n        `[ConversationalAI] Invalid server-location: ${location}. Defaulting to \"us\"`\n      );\n      return \"us\";\n  }\n}\n\nexport function getOriginForLocation(location: Location): string {\n  const originMap: Record<Location, string> = {\n    us: \"wss://api.elevenlabs.io\",\n    \"eu-residency\": \"wss://api.eu.residency.elevenlabs.io\",\n    \"in-residency\": \"wss://api.in.residency.elevenlabs.io\",\n    global: \"wss://api.elevenlabs.io\",\n  };\n\n  return originMap[location];\n}\n\nexport function getLivekitUrlForLocation(location: Location): string {\n  const livekitUrlMap: Record<Location, string> = {\n    us: \"wss://livekit.rtc.elevenlabs.io\",\n    \"eu-residency\": \"wss://livekit.rtc.eu.residency.elevenlabs.io\",\n    \"in-residency\": \"wss://livekit.rtc.in.residency.elevenlabs.io\",\n    global: \"wss://livekit.rtc.elevenlabs.io\",\n  };\n\n  return livekitUrlMap[location];\n}\n\nexport type {\n  Role,\n  Mode,\n  Status,\n  SessionConfig,\n  DisconnectionDetails,\n  Language,\n  VadScoreEvent,\n  InputConfig,\n  FormatConfig,\n  VoiceConversation,\n  TextConversation,\n  Callbacks,\n} from \"@elevenlabs/client\";\nexport { postOverallFeedback } from \"@elevenlabs/client\";\n\n// Scribe exports\nexport {\n  useScribe,\n  AudioFormat,\n  CommitStrategy,\n  RealtimeEvents,\n} from \"./scribe\";\nexport type {\n  ScribeStatus,\n  TranscriptSegment,\n  ScribeCallbacks,\n  ScribeHookOptions,\n  UseScribeReturn,\n  RealtimeConnection,\n} from \"./scribe\";\n\nexport type HookOptions = Partial<\n  SessionConfig &\n    HookCallbacks &\n    ClientToolsConfig &\n    InputConfig &\n    OutputConfig &\n    AudioWorkletConfig &\n    FormatConfig & {\n      serverLocation?: Location | string;\n    }\n>;\nexport type ControlledState = {\n  micMuted?: boolean;\n  volume?: number;\n};\nexport type HookCallbacks = Pick<\n  Callbacks,\n  | \"onConnect\"\n  | \"onDisconnect\"\n  | \"onError\"\n  | \"onMessage\"\n  | \"onAudio\"\n  | \"onModeChange\"\n  | \"onStatusChange\"\n  | \"onCanSendFeedbackChange\"\n  | \"onDebug\"\n  | \"onUnhandledClientToolCall\"\n  | \"onVadScore\"\n  | \"onInterruption\"\n  | \"onAgentToolResponse\"\n  | \"onConversationMetadata\"\n  | \"onMCPToolCall\"\n  | \"onMCPConnectionStatus\"\n  | \"onAsrInitiationMetadata\"\n  | \"onAgentChatResponsePart\"\n>;\n\nexport function useConversation<T extends HookOptions & ControlledState>(\n  props: T = {} as T\n) {\n  const { micMuted, volume, serverLocation, ...defaultOptions } = props;\n  const conversationRef = useRef<Conversation | null>(null);\n  const lockRef = useRef<Promise<Conversation> | null>(null);\n  const [status, setStatus] = useState<Status>(\"disconnected\");\n  const [canSendFeedback, setCanSendFeedback] = useState(false);\n  const [mode, setMode] = useState<Mode>(\"listening\");\n\n  const micMutedRef = useRef<boolean | undefined>(micMuted);\n  const volumeRef = useRef<number | undefined>(volume);\n\n  micMutedRef.current = micMuted;\n  volumeRef.current = volume;\n\n  useEffect(() => {\n    if (micMuted !== undefined) {\n      conversationRef?.current?.setMicMuted(micMuted);\n    }\n  }, [micMuted]);\n\n  useEffect(() => {\n    if (volume !== undefined) {\n      conversationRef?.current?.setVolume({ volume });\n    }\n  }, [volume]);\n\n  useEffect(() => {\n    return () => {\n      conversationRef.current?.endSession();\n    };\n  }, []);\n\n  return {\n    startSession: (async (options?: HookOptions) => {\n      if (conversationRef.current?.isOpen()) {\n        return conversationRef.current.getId();\n      }\n\n      if (lockRef.current) {\n        const conversation = await lockRef.current;\n        return conversation.getId();\n      }\n\n      try {\n        const resolvedServerLocation = parseLocation(\n          options?.serverLocation || serverLocation\n        );\n        const origin = getOriginForLocation(resolvedServerLocation);\n        const livekitUrl = getLivekitUrlForLocation(resolvedServerLocation);\n\n        lockRef.current = Conversation.startSession({\n          ...(defaultOptions ?? {}),\n          ...(options ?? {}),\n          origin,\n          livekitUrl,\n          overrides: {\n            ...(defaultOptions?.overrides ?? {}),\n            ...(options?.overrides ?? {}),\n            client: {\n              ...(defaultOptions?.overrides?.client ?? {}),\n              ...(options?.overrides?.client ?? {}),\n              source:\n                options?.overrides?.client?.source ||\n                defaultOptions?.overrides?.client?.source ||\n                \"react_sdk\",\n              version:\n                options?.overrides?.client?.version ||\n                defaultOptions?.overrides?.client?.version ||\n                PACKAGE_VERSION,\n            },\n          },\n          // Pass through user-provided callbacks\n          onConnect: options?.onConnect || defaultOptions?.onConnect,\n          onDisconnect: options?.onDisconnect || defaultOptions?.onDisconnect,\n          onError: options?.onError || defaultOptions?.onError,\n          onMessage: options?.onMessage || defaultOptions?.onMessage,\n          onAudio: options?.onAudio || defaultOptions?.onAudio,\n          onDebug: options?.onDebug || defaultOptions?.onDebug,\n          onUnhandledClientToolCall:\n            options?.onUnhandledClientToolCall ||\n            defaultOptions?.onUnhandledClientToolCall,\n          onVadScore: options?.onVadScore || defaultOptions?.onVadScore,\n          onInterruption:\n            options?.onInterruption || defaultOptions?.onInterruption,\n          onAgentToolResponse:\n            options?.onAgentToolResponse || defaultOptions?.onAgentToolResponse,\n          onConversationMetadata:\n            options?.onConversationMetadata ||\n            defaultOptions?.onConversationMetadata,\n          onMCPToolCall:\n            options?.onMCPToolCall || defaultOptions?.onMCPToolCall,\n          onMCPConnectionStatus:\n            options?.onMCPConnectionStatus ||\n            defaultOptions?.onMCPConnectionStatus,\n          onAsrInitiationMetadata:\n            options?.onAsrInitiationMetadata ||\n            defaultOptions?.onAsrInitiationMetadata,\n          onAgentChatResponsePart:\n            options?.onAgentChatResponsePart ||\n            defaultOptions?.onAgentChatResponsePart,\n          onModeChange: ({ mode }) => {\n            setMode(mode);\n            (options?.onModeChange || defaultOptions?.onModeChange)?.({ mode });\n          },\n          onStatusChange: ({ status }) => {\n            setStatus(status);\n            (options?.onStatusChange || defaultOptions?.onStatusChange)?.({\n              status,\n            });\n          },\n          onCanSendFeedbackChange: ({ canSendFeedback }) => {\n            setCanSendFeedback(canSendFeedback);\n            (\n              options?.onCanSendFeedbackChange ||\n              defaultOptions?.onCanSendFeedbackChange\n            )?.({ canSendFeedback });\n          },\n        } as Options);\n\n        conversationRef.current = await lockRef.current;\n        // Persist controlled state between sessions using refs to get current values\n        if (micMutedRef.current !== undefined) {\n          conversationRef.current.setMicMuted(micMutedRef.current);\n        }\n        if (volumeRef.current !== undefined) {\n          conversationRef.current.setVolume({ volume: volumeRef.current });\n        }\n\n        return conversationRef.current.getId();\n      } finally {\n        lockRef.current = null;\n      }\n    }) as T extends SessionConfig\n      ? (options?: HookOptions) => Promise<string>\n      : (options: SessionConfig & HookOptions) => Promise<string>,\n    endSession: async () => {\n      const conversation = conversationRef.current;\n      conversationRef.current = null;\n      await conversation?.endSession();\n    },\n    setVolume: ({ volume }: { volume: number }) => {\n      conversationRef.current?.setVolume({ volume });\n    },\n    getInputByteFrequencyData: () => {\n      return conversationRef.current?.getInputByteFrequencyData();\n    },\n    getOutputByteFrequencyData: () => {\n      return conversationRef.current?.getOutputByteFrequencyData();\n    },\n    getInputVolume: () => {\n      return conversationRef.current?.getInputVolume() ?? 0;\n    },\n    getOutputVolume: () => {\n      return conversationRef.current?.getOutputVolume() ?? 0;\n    },\n    sendFeedback: (like: boolean) => {\n      conversationRef.current?.sendFeedback(like);\n    },\n    getId: () => {\n      return conversationRef.current?.getId();\n    },\n    sendContextualUpdate: (text: string) => {\n      conversationRef.current?.sendContextualUpdate(text);\n    },\n    sendUserMessage: (text: string) => {\n      conversationRef.current?.sendUserMessage(text);\n    },\n    sendUserActivity: () => {\n      conversationRef.current?.sendUserActivity();\n    },\n    sendMCPToolApprovalResult: (toolCallId: string, isApproved: boolean) => {\n      conversationRef.current?.sendMCPToolApprovalResult(\n        toolCallId,\n        isApproved\n      );\n    },\n    changeInputDevice: async (\n      config: DeviceFormatConfig & DeviceInputConfig\n    ) => {\n      if (\n        conversationRef.current &&\n        \"changeInputDevice\" in conversationRef.current\n      ) {\n        return await (\n          conversationRef.current as unknown as {\n            changeInputDevice: (config: any) => Promise<any>;\n          }\n        ).changeInputDevice(config);\n      }\n      throw new Error(\n        \"Device switching is only available for voice conversations\"\n      );\n    },\n    changeOutputDevice: async (config: DeviceFormatConfig) => {\n      if (\n        conversationRef.current &&\n        \"changeOutputDevice\" in conversationRef.current\n      ) {\n        return await (\n          conversationRef.current as unknown as {\n            changeOutputDevice: (config: any) => Promise<any>;\n          }\n        ).changeOutputDevice(config);\n      }\n      throw new Error(\n        \"Device switching is only available for voice conversations\"\n      );\n    },\n    status,\n    canSendFeedback,\n    micMuted,\n    isSpeaking: mode === \"speaking\",\n  };\n}\n\n// const con = useConversation({agentId: \"\"})\n","// This file is auto-generated during build\nexport const PACKAGE_VERSION = \"0.11.0\";\n"],"names":["useScribe","options","onSessionStarted","onPartialTranscript","onCommittedTranscript","onCommittedTranscriptWithTimestamps","onError","onAuthError","onConnect","onDisconnect","onQuotaExceededError","defaultToken","token","defaultModelId","modelId","defaultBaseUri","baseUri","defaultCommitStrategy","commitStrategy","defaultVadSilenceThresholdSecs","vadSilenceThresholdSecs","defaultVadThreshold","vadThreshold","defaultMinSpeechDurationMs","minSpeechDurationMs","defaultMinSilenceDurationMs","minSilenceDurationMs","defaultLanguageCode","languageCode","defaultMicrophone","microphone","defaultAudioFormat","audioFormat","defaultSampleRate","sampleRate","_options$autoConnect","autoConnect","connectionRef","useRef","_useState","useState","status","setStatus","_useState2","partialTranscript","setPartialTranscript","_useState3","committedTranscripts","setCommittedTranscripts","_useState4","error","setError","useEffect","_connectionRef$curren","current","close","connect","useCallback","runtimeOptions","console","warn","Promise","resolve","Error","connection","includeTimestamps","Scribe","on","RealtimeEvents","SESSION_STARTED","PARTIAL_TRANSCRIPT","data","message","text","COMMITTED_TRANSCRIPT","segment","id","Date","now","Math","random","timestamp","isFinal","prev","concat","COMMITTED_TRANSCRIPT_WITH_TIMESTAMPS","ERROR","err","AUTH_ERROR","QUOTA_EXCEEDED","OPEN","CLOSE","errorMessage","e","reject","disconnect","_connectionRef$curren2","sendAudio","audioBase64","send","_extends","commit","clearTranscripts","getConnection","isConnected","isTranscribing","parseLocation","location","getOriginForLocation","us","global","getLivekitUrlForLocation","useConversation","props","micMuted","volume","serverLocation","defaultOptions","_objectWithoutPropertiesLoose","_excluded","conversationRef","lockRef","canSendFeedback","setCanSendFeedback","mode","setMode","micMutedRef","volumeRef","_conversationRef$curr","undefined","setMicMuted","_conversationRef$curr2","setVolume","_conversationRef$curr3","endSession","startSession","_conversationRef$curr4","_exit","_temp2","_result","origin","resolvedServerLocation","livekitUrl","Conversation","overrides","_defaultOptions$overr","_options$overrides","client","_defaultOptions$overr2","_defaultOptions$overr3","_options$overrides$cl","_options$overrides2","source","_options$overrides3","_defaultOptions$overr4","version","_options$overrides4","_defaultOptions$overr5","onMessage","onAudio","onDebug","onUnhandledClientToolCall","onVadScore","onInterruption","onAgentToolResponse","onConversationMetadata","onMCPToolCall","onMCPConnectionStatus","onAsrInitiationMetadata","onAgentChatResponsePart","onModeChange","_ref","_ref2","onStatusChange","_ref3","_ref4","onCanSendFeedbackChange","_ref5","_ref6","then","_lockRef$current","getId","_finallyRethrows","_wasThrown","_result2","isOpen","_temp","conversation","_conversation$getId","_ref7","_conversationRef$curr5","getInputByteFrequencyData","_conversationRef$curr6","getOutputByteFrequencyData","_conversationRef$curr7","getInputVolume","_conversationRef$curr8","_conversationRef$curr9","getOutputVolume","_conversationRef$curr0","_conversationRef$curr1","sendFeedback","like","_conversationRef$curr10","_conversationRef$curr11","sendContextualUpdate","_conversationRef$curr12","sendUserMessage","_conversationRef$curr13","sendUserActivity","_conversationRef$curr14","sendMCPToolApprovalResult","toolCallId","isApproved","_conversationRef$curr15","changeInputDevice","config","_temp4","_exit2","_result3","_temp3","_await$conversationRe","changeOutputDevice","_temp6","_exit3","_result4","_temp5","_await$conversationRe2","isSpeaking"],"mappings":"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"}